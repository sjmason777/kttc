# शब्दकोश प्रबंधन

**अनुवाद गुणवत्ता जांच को बेहतर बनाने के लिए भाषाई संदर्भ डेटा का लाभ उठाएं।**

शब्दकोश भाषा-विशिष्ट भाषाई ज्ञान प्रदान करते हैं जो KTTC के एजेंटों को अधिक सटीक गुणवत्ता मूल्यांकन करने में मदद करते हैं। इसमें व्याकरण नियम, शब्दावली परिभाषाएं और भाषा-विशिष्ट पैटर्न शामिल हैं।

## सारांश

KTTC निम्नलिखित के लिए व्यापक शब्दकोशों को एकीकृत करता है:

- **MQM त्रुटि परिभाषाएं** - W3C बहुआयामी गुणवत्ता मैट्रिक्स से मानक त्रुटि वर्गीकरण
- **रूसी व्याकरण** - कारक प्रणाली, क्रिया पक्ष, कण
- **चीनी वर्गीकारक** - माप शब्द (量词) और उपयोग पैटर्न
- **हिंदी व्याकरण** - कारक प्रणाली (कारक), परसर्ग, तिर्यक रूप
- **फारसी व्याकरण** - एज़ाफे संरचना (اضافه), संयुक्त क्रियाएं

ये शब्दकोश मूल्यांकन के दौरान गुणवत्ता एजेंटों द्वारा स्वचालित रूप से लोड और उपयोग किए जाते हैं।

## समर्थित भाषाएं

### MQM मूल परिभाषाएं

**उपलब्ध भाषाओं में:** अंग्रेजी, रूसी, चीनी, हिंदी, फारसी

MQM (बहुआयामी गुणवत्ता मैट्रिक्स) शब्दकोश सभी एजेंटों द्वारा उपयोग की जाने वाली मानकीकृत त्रुटि परिभाषाएं प्रदान करता है।

**त्रुटि श्रेणियां:**
- सटीकता: गलत अनुवाद, चूक, जोड़
- प्रवाह: व्याकरण, वर्तनी, विराम चिह्न
- शैली: रजिस्टर, औपचारिकता, स्थिरता
- शब्दावली: डोमेन-विशिष्ट शब्द त्रुटियां

### रूसी भाषा शब्दकोश

**फ़ाइल:** `glossaries/ru/grammar_reference.json`

**शामिल:**
- **6 व्याकरणिक कारक** (कर्ता, संबंध, संप्रदान, कर्म, करण, अधिकरण)
- **क्रिया पक्ष** (पूर्ण/अपूर्ण उपयोग नियम)
- **कण** (же, ли, бы, не, ни)
- **रजिस्टर मार्कर** (ты/вы भेद)

**एजेंट द्वारा उपयोग:** `RussianFluencyAgent`

### चीनी भाषा शब्दकोश

**फ़ाइल:** `glossaries/zh/classifiers.json`

**शामिल:**
- **व्यक्तिगत वर्गीकारक** (个, 只, 条, 张, 本 आदि)
- **सामूहिक वर्गीकारक** (群, 堆, 批 आदि)
- **कंटेनर वर्गीकारक** (杯, 碗, 盒 आदि)
- **माप वर्गीकारक** (米, 公斤, 升 आदि)
- **अस्थायी वर्गीकारक** (年, 月, 天 आदि)
- **मौखिक वर्गीकारक** (次, 遍, 趟 आदि)

**एजेंट द्वारा उपयोग:** `ChineseFluencyAgent`

### हिंदी भाषा शब्दकोश

**फ़ाइल:** `glossaries/hi/grammar_reference.json`

**शामिल:**
- **8 व्याकरणिक कारक** (कारक - kārak प्रणाली)
- **परसर्ग** (को, से, में, पर आदि)
- **तिर्यक रूप** (निर्माण नियम)
- **लिंग समझौता** (पुल्लिंग/स्त्रीलिंग पैटर्न)

**एजेंट द्वारा उपयोग:** `HindiFluencyAgent`

### फारसी भाषा शब्दकोश

**फ़ाइल:** `glossaries/fa/grammar_reference.json`

**शामिल:**
- **एज़ाफे संरचना** (اضافه - e-zāfe नियम)
- **संयुक्त क्रियाएं** (हल्की क्रियाएं: کردن, زدن, داشتن आदि)
- **पूर्वसर्ग** (در, به, از आदि)
- **औपचारिक/अनौपचारिक रजिस्टर** (شما/تو भेद)

**एजेंट द्वारा उपयोग:** `PersianFluencyAgent`

## शब्दकोश कैसे काम करते हैं

### स्वचालित एकीकरण

एजेंट प्रारंभीकरण के दौरान शब्दकोश स्वचालित रूप से लोड होते हैं:

```python
from kttc.agents import RussianFluencyAgent, ChineseFluencyAgent
from kttc.llm import OpenAIProvider

provider = OpenAIProvider(api_key="your-key")

# रूसी एजेंट स्वचालित रूप से grammar_reference.json लोड करता है
russian_agent = RussianFluencyAgent(provider)

# चीनी एजेंट स्वचालित रूप से classifiers.json लोड करता है
chinese_agent = ChineseFluencyAgent(provider)
```

कोई कॉन्फ़िगरेशन की आवश्यकता नहीं - शब्दकोश एजेंट प्रकार के आधार पर लोड होते हैं।

### त्रुटि संवर्धन

जब एजेंट त्रुटियों का पता लगाते हैं, तो वे स्वचालित रूप से शब्दकोश परिभाषाओं के साथ त्रुटि विवरण को समृद्ध करते हैं:

```python
# एजेंट द्वारा पता लगाई गई त्रुटि
error = {
    "category": "fluency",
    "subcategory": "grammar",
    "description": "कारक बेमेल"
}

# शब्दकोश संवर्धन के बाद
enriched_error = {
    "category": "fluency",
    "subcategory": "grammar",
    "description": "कारक बेमेल। हिंदी में, विशेषण संज्ञाओं के साथ कारक, संख्या और लिंग में सहमत होने चाहिए। कर्ता कारक (को) नकारात्मकता के बाद, संख्याओं के साथ और स्वामित्व दिखाने के लिए उपयोग किया जाता है।"
}
```

### MQM स्कोर वेटिंग

MQM शब्दकोश स्कोरिंग के लिए श्रेणी भार प्रदान करता है:

```python
from kttc.core.mqm import MQMScorer

# शब्दकोश से भार लोड करें
scorer = MQMScorer(use_glossary_weights=True)

# glossary/en/mqm_core.json से श्रेणी भार:
# accuracy: 1.5 (सटीकता त्रुटियों के लिए अधिक जुर्माना)
# terminology: 1.2
# fluency: 1.0
# style: 0.8 (शैली मुद्दों के लिए कम जुर्माना)
```

## CLI कमांड

### शब्दकोश सामग्री देखें

```bash
# सभी उपलब्ध शब्दकोशों की सूची
kttc glossary list

# विशिष्ट शब्दकोश देखें
kttc glossary view --language hi --name grammar_reference

# शब्दकोश में खोजें
kttc glossary search --language hi --query "कारक"

# JSON प्रारूप में देखें
kttc glossary view --language en --name mqm_core --format json
```

### शब्दावली कमांड

```bash
# त्रुटि प्रकार सत्यापित करें
kttc terminology validate --error-type "mistranslation" --language hi

# MQM त्रुटि श्रेणियों की सूची
kttc terminology list-categories

# त्रुटि परिभाषा प्राप्त करें
kttc terminology define --error-type "grammar" --language hi
```

## शब्दकोश फ़ाइल प्रारूप

शब्दकोशों को निम्नलिखित संरचना के साथ JSON फ़ाइलों के रूप में संग्रहीत किया जाता है:

### MQM कोर प्रारूप

```json
{
  "metadata": {
    "name": "MQM Core Error Taxonomy",
    "version": "1.0",
    "language": "hi",
    "description": "W3C बहुआयामी गुणवत्ता मैट्रिक्स"
  },
  "categories": {
    "accuracy": {
      "weight": 1.5,
      "subcategories": {
        "mistranslation": {
          "definition": "लक्ष्य पाठ स्रोत पाठ को सटीक रूप से प्रस्तुत नहीं करता है",
          "examples": ["बिल्ली → कुत्ता", "खरीदना → बेचना"],
          "severity_guidelines": "Major या Critical"
        }
      }
    }
  }
}
```

### भाषा-विशिष्ट प्रारूप

```json
{
  "metadata": {
    "name": "हिंदी व्याकरण संदर्भ",
    "version": "1.0",
    "language": "hi"
  },
  "cases": {
    "nominative": {
      "name": "कर्ता कारक",
      "usage": ["वाक्य का कर्ता", "विधेय संज्ञा"],
      "question": "कौन? क्या?",
      "examples": ["छात्र पढ़ता है", "यह किताब है"]
    }
  },
  "postpositions": {
    "को": {
      "usage": "कर्म कारक और संप्रदान कारक के लिए",
      "examples": ["राम को", "किताब को"]
    }
  }
}
```

## उन्नत उपयोग

### कस्टम शब्दकोश

आप `glossaries/` निर्देशिका में कस्टम शब्दकोश जोड़ सकते हैं:

```bash
# कस्टम शब्दकोश बनाएं
mkdir -p glossaries/hi
cat > glossaries/hi/medical_terms.json <<EOF
{
  "metadata": {
    "name": "चिकित्सा शब्दावली",
    "version": "1.0",
    "language": "hi",
    "domain": "medical"
  },
  "terms": {
    "हृदयाघात": {
      "definition": "दिल का दौरा",
      "synonyms": ["मायोकार्डियल इन्फार्क्शन", "MI"],
      "avoid": ["कार्डियक अरेस्ट"]
    }
  }
}
EOF
```

### प्रोग्रामेटिक एक्सेस

```python
from kttc.terminology import GlossaryManager

# प्रबंधक प्रारंभ करें
manager = GlossaryManager()

# शब्दकोश लोड करें
mqm_data = manager.load_glossary("hi", "mqm_core")

# विशिष्ट परिभाषा प्राप्त करें
definition = mqm_data["categories"]["accuracy"]["subcategories"]["mistranslation"]

# त्रुटि प्रकार सत्यापित करें
is_valid, info = manager.validate_mqm_error("mistranslation", "hi")
```

### शब्दकोश संवर्धन अक्षम करें

```python
from kttc.agents.parser import ErrorParser

# बिना संवर्धन के पार्स करें
errors = ErrorParser.parse_errors(
    response=llm_response,
    enrich_with_glossary=False  # संवर्धन अक्षम करें
)

# या MQM स्कोरिंग के लिए डिफ़ॉल्ट भार का उपयोग करें
from kttc.core.mqm import MQMScorer

scorer = MQMScorer(use_glossary_weights=False)  # डिफ़ॉल्ट भार का उपयोग करें
```

## लाभ

### 1. सुधारी हुई सटीकता

शब्दकोश सटीक भाषाई परिभाषाएं प्रदान करते हैं जो एजेंटों को मदद करते हैं:
- भाषा-विशिष्ट त्रुटियों को अधिक सटीक रूप से पहचानें
- व्याकरणिक पैटर्न और नियमों को समझें
- शब्दावली उपयोग को सत्यापित करें

### 2. बेहतर त्रुटि विवरण

समृद्ध त्रुटि विवरण में शामिल हैं:
- भाषाई स्पष्टीकरण
- व्याकरण नियम
- उपयोग उदाहरण
- सुधार

### 3. सुसंगत स्कोरिंग

MQM शब्दकोश सुनिश्चित करता है:
- मानकीकृत त्रुटि वर्गीकरण
- सुसंगत श्रेणी भार
- प्रजनन योग्य गुणवत्ता स्कोर
- उद्योग मानकों के साथ संरेखण (W3C MQM)

### 4. बहुभाषी समर्थन

एक ही शब्दकोश ढांचा काम करता है:
- 5 भाषाएं (en, ru, zh, hi, fa)
- कई त्रुटि श्रेणियां
- भाषा-विशिष्ट सुविधाएं
- सांस्कृतिक अनुकूलन

## फ़ाइल स्थान

```
glossaries/
├── en/
│   └── mqm_core.json          # अंग्रेजी MQM परिभाषाएं
├── ru/
│   ├── mqm_core.json          # रूसी MQM परिभाषाएं
│   └── grammar_reference.json # रूसी व्याकरण नियम
├── zh/
│   ├── mqm_core.json          # चीनी MQM परिभाषाएं
│   └── classifiers.json       # चीनी माप शब्द
├── hi/
│   ├── mqm_core.json          # हिंदी MQM परिभाषाएं
│   └── grammar_reference.json # हिंदी व्याकरण नियम
└── fa/
    ├── mqm_core.json          # फारसी MQM परिभाषाएं
    └── grammar_reference.json # फारसी व्याकरण नियम
```

## संबंधित दस्तावेज़ीकरण

- **[CLI कमांड](../reference/cli-commands.md)** - शब्दकोश और शब्दावली कमांड
- **[वास्तुकला](../explanation/architecture.md)** - शब्दकोश एजेंटों के साथ कैसे एकीकृत होते हैं
- **[भाषा सुविधाएं](language-features.md)** - भाषा-विशिष्ट क्षमताएं

## समस्या निवारण

### शब्दकोश लोड नहीं हो रहा

**समस्या:** एजेंट शब्दकोश डेटा का उपयोग नहीं करता

**समाधान:**
```python
# जांचें कि शब्दकोश फ़ाइल मौजूद है
import os
glossary_path = "glossaries/hi/grammar_reference.json"
print(f"मौजूद है: {os.path.exists(glossary_path)}")

# डीबग लॉगिंग सक्षम करें
import logging
logging.basicConfig(level=logging.DEBUG)
```

### कस्टम शब्दकोश नहीं मिला

**समस्या:** कस्टम शब्दकोश लोड नहीं हुआ

**समाधान:**
- सुनिश्चित करें कि फ़ाइल सही निर्देशिका में है: `glossaries/{language}/{name}.json`
- जांचें कि JSON सिंटैक्स मान्य है
- सत्यापित करें कि मेटाडेटा अनुभाग मौजूद है

### त्रुटि संवर्धन काम नहीं कर रहा

**समस्या:** त्रुटियों को परिभाषाओं के साथ समृद्ध नहीं किया गया

**समाधान:**
```python
# स्पष्ट रूप से संवर्धन सक्षम करें
from kttc.agents.parser import ErrorParser

errors = ErrorParser.parse_errors(
    response=response,
    enrich_with_glossary=True,  # स्पष्ट रूप से सक्षम करें
    language="hi"  # भाषा निर्दिष्ट करें
)
```

## प्रदर्शन

**शब्दकोश लोडिंग:**
- लोड समय: प्रति शब्दकोश <100ms
- मेमोरी उपयोग: प्रति शब्दकोश ~1-5MB
- पहले लोड के बाद कैश किया गया

**त्रुटि संवर्धन:**
- लुकअप समय: प्रति त्रुटि <1ms
- कोई API कॉल की आवश्यकता नहीं
- निर्धारणीय परिणाम

## भविष्य के संवर्धन

नियोजित शब्दकोश सुविधाएँ:
- वेब UI के माध्यम से उपयोगकर्ता-संपादन योग्य शब्दकोश
- डोमेन-विशिष्ट शब्दकोश (कानूनी, चिकित्सा, तकनीकी)
- शब्दकोश संस्करण नियंत्रण
- समुदाय-योगदान शब्दकोश
- शब्दकोश विलय और संघर्ष समाधान
